var collections = require('collections');

module.exports = function fetcher (route, callback) {
  var collection = collections[route.collection];

  var Model = collection.Model;

  var model = new Model({
    '@id': route.id
  });

  if (callback) {
    model.fetch({
      success: function (model, response, options) {
        return callback(null, model);
      },
      error: function (model, response, options) {
        return callback(response);
      },
    });
  } else {
    model.fetch();
  }
  
  return model;
}

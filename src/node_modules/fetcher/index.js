var collections = require('collections');
var debug = require('debug')("craftodex:ui:fetcher")

module.exports = function fetcher (route, callback) {
  var collection = collections[route.collection];
  var Model = collection.Model;
  
  debug(Model)

  var model = new Model({
    '@id': route.id
  });

  if (callback) {
    model.fetch({
      success: function (model, response, options) {
        return callback(null, model);
      },
      error: function (model, response, options) {
        return callback(response);
      },
    });
  } else {
    model.fetch();
  }
  
  return model;
}

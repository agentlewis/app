import test from 'tape'
import state from 'state'
import { relationshipsByAgentId, relationshipsByAgentIdAndDirection } from './getters'
import equals from 'lodash.isequal'

const expected0 = {
  'simon-is-member-of-holodex': {
    id: 'simon-is-member-of-holodex',
    type: 'is-member-of',
    source: 'simon',
    target: 'holodex'
  },
  'mikey-stewards-simon': {
    id: 'mikey-stewards-simon',
    type: 'stewards',
    source: 'mikey',
    target: 'simon',
    context: 'enspiral'
  }
}

const expected1 = {
  context: {},
  source: {
    'simon-is-member-of-holodex': {
      id: 'simon-is-member-of-holodex',
      source: 'simon',
      target: 'holodex',
      type: 'is-member-of'
    }
  },
  target: {
    'mikey-stewards-simon': {
      context: 'enspiral',
      id: 'mikey-stewards-simon',
      source: 'mikey',
      target: 'simon',
      type: 'stewards'
    }
  }
}


test('it gets an object of relationships indexed by agent-id', t => {
  let actual = relationshipsByAgentId(state)['simon']

  t.deepEqual(actual, expected0)
  t.end()
})

test('it gets an object of relationships indexed by agent-id and direction', t => {
  let actual = relationshipsByAgentIdAndDirection(state)['simon']

  t.deepEqual(actual, expected1)
  t.end()
})

var extend = require('xtend/mutable');
var inherits = require('inherits');
var Model = require('base/model');

var Group = require('group/model');
var Person = require('person/model');
var RelationshipType = require('relationship-type/model');
var Relationship = require('relationship/model');

function Relationship () {
  Model.apply(this, arguments);
}

module.exports = Relationship;

inherits(Relationship, Model);

extend(Relationship.prototype, {

  modelType: "Relationship",

  constructor: function (attrs, options) {
    // polymorphic types for 'is' and 'has' children props
    switch (attrs.is['@type']) {
      case 'Group': this.children.is = Group; break;
      case 'Person': this.children.is = Person; break;
    }
    switch (attrs.has['@type']) {
      case 'Group': this.children.has = Group; break;
      case 'Person': this.children.has = Person; break;
    }

    Model.prototype.apply(this, arguments);
  },

  children: {
    relationshipType: RelationshipType,
    symmetric: Relationship,
  },
});

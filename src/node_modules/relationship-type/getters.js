'use strict';

import { createSelector } from 'reselect'
import filter from 'lodash.filter'
import { agentRels } from 'relationship/getters'

const initialState = require('./reducers').initialState

const state = { relationshipTypes: initialState }

export const relTypeIds = state => state.relationshipTypes.ids
export const relTypesById = state => state.relationshipTypes.byId

const agentRelTypesById = (agentId, relation) => {
  return createSelector(
    [agentRels(agentId, relation), relTypesById],
    (agentRels, relTypesById) => {
      return agentRels.reduce((memo, relationship) => {
        if (!memo[relationship.type]) {
          memo[relationship.type] = relTypesById[relationship.type]
        }
        return memo
      }, {})
    }
  )
}

module.exports = {
  agentRelTypesById: agentRelTypesById
}

// console.log(initialState)

console.log(agentRelTypesById('simon', 'source')(state))

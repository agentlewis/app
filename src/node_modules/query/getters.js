'use strict';
import { createSelector } from 'reselect'
import filter from 'lodash.filter'
import each from 'lodash.foreach'
import { agentRelsByRelation } from 'relationship/getters'

// WIP

const agentQueries = (agentId) => {
  return createSelector(
    [agentRelsByRelation(agentId)],
    agentRelsByRelation => {
      let queries = []
      let relations = ['source', 'target', 'context']
      for (relation of relations) {
        let relTypesMap = {}
        agentRelsByRelation[relation].forEach(relationship => {
          if (!relTypesMap[relationship.type]) {
            let query = { relationshipType: relationship.type }
            query[relation] = agentId
            queries.push(query)
            relTypesMap[relationship.type] = true
          }
        })
      }

      return queries
    }
  )
}


module.exports = {
  agentQueries: agentQueries
}

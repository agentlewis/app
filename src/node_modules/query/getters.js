'use strict';
import { createSelector } from 'reselect'
import { agentRelsByRelation } from 'relationship/getters'
import R from 'ramda'

// WIP
const agentQueries = (agentId) => {
  return createSelector(
    [agentRelsByRelation(agentId)],
    agentRelsByRelation => {
      let queries = []
      let relations = ['source', 'target', 'context']
      for (relation of relations) {
        let relTypesMap = {}
        R.forEach(relationship => {
          if (!relTypesMap[relationship.type]) {
            let query = { relationshipType: relationship.type }
            query[relation] = agentId
            queries.push(query)
            relTypesMap[relationship.type] = true
          }
        }, agentRelsByRelation[relation])
      }

      return queries
    }
  )
}



module.exports = {
  agentQueries
}

var express = require('express')
var serve = require('serve-browserify')
var Cacher = require('cacher')

module.exports = serveBundle

function serveBundle (opts) {
  var app = express()

  if (opts.cacheLength) {
    var cacher = new Cacher()
    app.use(cacher.cache(opts.cacheLength))
  }

  app.get('bundle.js', serve(opts))

  return app
}

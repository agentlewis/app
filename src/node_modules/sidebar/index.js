var insertCss = require('insert-css')
var r = require('r-dom')
var React = require('react')
var fs = require('fs')
var debug = require('debug')('sidebar:index')
var AmpersandReactMixin = require('ampersand-react-mixin')



var simpleSidebarCSS = fs.readFileSync(__dirname + '/sidebar.css')
insertCss(simpleSidebarCSS)

module.exports = React.createClass({

//   mixins: [AmpersandReactMixin],

  render: function () {
    var self = this
    var model = self.props.model

    return r.div(
      { id: 'sidebar-wrapper' },
      [
        r.ul( { className: 'sidebar-nav'}, [
          r.li({ className: 'sidebar-brand'}, [
            r.a({ href: '#'}, model.get('name'))
          ]),
          //NOTE assumes children are wrapped in <li>'s
          //may need a React.children utilities
          r.div({}, self.props.children),
        ])
      ]
    )
  },

  componentDidMount: function () {
    var self = this
    var model = self.props.model

    model.on('change', function (model, val) {
      self.forceUpdate()
    })

  }


})

var test = require('tape')
var _ = require('lodash')

var fsSync = require('../')

test('sync("read", collection)', function (t) {

  var sync = fsSync({
    location: __dirname + "/data",
    idAttribute: "@id",
  })

  sync.fetch(function (err, graph) {
    graph = _.sortBy(graph, function (entity) {
      return entity.name.toLowerCase()
    })

    t.deepEqual(graph, [{
      '@id': "things/apple",
      name: "apple",
      description: "a tasty fruit",
    }, {
      '@id': "things/bear",
      name: "bear",
      description: "a beautiful animal",
    }, {
      '@id': "things/california",
      name: "California",
      description: "a lovely place",
    }])

    t.end()
  })
})

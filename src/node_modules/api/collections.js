var _ = require('lodash');

var collections = require('collections')
var Service = require('base/service')

// fill in any necessary defaults
_.forEach(collections, function (type, pluralName) {

  // instantiate the type store
  type.store = new type.Collection()

  if (!type.service) {
    // create default service from base service
    type.service = Service(type.store)
  }

  // pre-fetch store data
  type.store.fetch()
});

module.exports = collections;

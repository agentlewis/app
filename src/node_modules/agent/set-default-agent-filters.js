var Url = require('url')
var config = require('config')
var prefix = Url.format(config.api)
var member = prefix + '/roleTypes/member'
var subgroup = prefix + '/roleTypes/subgroup'
var debug = require('debug')('set-default-filters')

module.exports = function (filter, hasChildren) {
  if (filter.agentType.id === 'Person' && filter.targetAgent['@type'] !== 'Group' || hasChildren && filter.id === 'Group-' + subgroup) {
    //[People who] [link] [Person] ||   //[Groups that] [belong to] [Group]
    filter.agentType.active = true
    filter.roleType.active = true
    filter.linkType.active = true
    filter.targetAgent.active = true
  }
  else if (filter.id === 'Person-' + member) {
    //[People in] [Group]
    filter.agentType.active = true
    filter.roleType.active = true
    filter.targetAgent.active = true
  }
  debug('filter', filter)
  return filter
}

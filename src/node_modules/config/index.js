var Url = require('url')
var defaults = require('lodash.defaults')

var isProd = require('util/isProd')
var config = require('../../../node_modules/config')

// expand url to full definition
config.url = Url.parse(Url.format(config.url))

// default urls to config.url
defaults(config.api.url, config.url)
defaults(config.ui.url, config.url)

// HACK: unset config api and ui port for production server
if (isProd) {
  config.api.url.port = undefined
  config.ui.url.port = undefined
}

module.exports = config

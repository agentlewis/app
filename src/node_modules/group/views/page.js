var React = require('react')
var r = require('r-dom')
var debug = require('debug')('craftodex:ui:group:views:page')

var router = require('router')
var GraphView = require('graph-view/graph-view')
var ListView = require('list-view')
var Link = require('base/views/href')

module.exports = React.createClass({
  componentDidMount: function () {
    this.props.model.on('change', function () {
      this.forceUpdate()
    }, this)
  },

  renderList: function () {
    return (
      r(ListView, {
        model: this.props.model
      })
    )
  },

  renderGraph: function () {

    return (
      r(GraphView, this.props)
    )
  },

  render: function () {
    var model = this.props.model
    var route = this.props.route

    debug('render', this.props)

    var view
    if (route.query.view === 'list') {
      view = this.renderList()
    } else {
      view = this.renderGraph()
    }

    return (
      r.div({}, [
        r.header({}, [
        ]),
        view
      ])
    )
  }
})

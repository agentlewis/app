var LokiCollection = require('lokijs').Collection

function Collection (Model) {
  this.Model = Model

  var collectionName = this.Model.prototype.collectionName
  var indices = Object.keys(this.Model.prototype._definition || {})

  LokiCollection.call(this, collectionName, {
    indices: indices
  })
}

Collection.prototype = Object.create(LokiCollection.prototype)

Collection.prototype.findById = function (id) {
  var query = {}
  query[this.Model.prototype.idAttribute] = id
  return this.findOne(query)
}

module.exports = Collection

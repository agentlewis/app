var Url = require('url')
var debug = require('debug')("holodex:base:store")
var Base = require('selfish')

var BaseModel = require('base/model')

module.exports = Base.extend({

  initialize: function (db) {
    this.db = db
    this.types = {}
  },

  addLense: function (TypeLense) {
    var typeLense = TypeLense.new()
    var typeName = typeLense.model.getType()
    var pluralName = typeLense.model.pluralName
    this.types[typeName] = typeLense
    this[pluralName] = typeLense
  },

  import: function (graph) {
    graph.forEach(function (entity) {
      var entityType = entity[model.typeAttribute]
      var typeLense = this.types[entityType]
      if (typeLense) {
        typeLense.import(entity)
      }
    })
  },
})

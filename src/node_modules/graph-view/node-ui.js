var React = require('react')
var r = require('r-dom')
var extend = require('xtend')
var debug = require('debug')("holodex:ui:graph-view:node-ui")

var Link = require('base/views/link')
var router = require('router')

var style = {

  circleClip20: {
    'border': "2px solid white",
    'borderRadius': 20,
    '-mozBorderRadius': 20,
    '-webkitBorderRadius': 20,
    'boxShadow': "0px 0px 5px rgba(48,48,48,0.9)",
    '-webkitBoxShadow': "0px 0px 5px rgba(48,48,48,0.9)",
  },

  node: {
    position: 'absolute',
  },
}

module.exports = React.createClass({
  render: function () {

    var d = this.props.datum
    var rect = this.props.svgRect

    var w = 40
    var h = 40
    var offset = w / 2

    var x = d.x + rect.left - offset
    var y = d.y + rect.top - offset

    return (
      r(Link, {
        href: router.format({ id: d.id }),
      }, [
        r.img({
          src: d.image,
          height: h,
          width: w,
          style: extend(
            style.node,
            { top: y, left: x },
            style.circleClip20
          ),
          className: 'node circle-clip-20',
        })
      ])
    )
  },
})

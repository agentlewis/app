var store = require('base/store')
var Labels = require('./labels')
var debug = require('debug')('graph-view:ampersand-collectiontags')
var format = require('string-format')
format.extend(String.prototype)

module.exports = function (filtersByType, modelName) {
  // if (!model) return
  var contextTags = []
  filtersByType.targetAgent.forEach(function (filter) {
    if (filter.linkType.active) {
      var linkTag = {
        filter: filter,
        type:  'Link',
        label: Labels.targetAgent[filter.linkType.id].template.format(filter.targetAgent.name)
      }
      contextTags.push(linkTag)
    }
  })
  filtersByType.context.forEach(function (filter) {
    if (filter.linkType.active) {
      var linkTag = {
        filter: filter,
        type:  'Link',
        label: Labels.contextAgent[filter.linkType.id].label
      }
      contextTags.push(linkTag)
    }
    if (filter.roleType.active) {
      var roleTag = {
        filter: filter,
        type:  'Role',
        label: Labels.contextAgent[filter.roleType.id].template.format(modelName)
      }
      contextTags.push(roleTag)
    }
  })
  debug('contexttags', contextTags)
  return contextTags
}

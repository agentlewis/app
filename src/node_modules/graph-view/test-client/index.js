var Node = require('graph-view/node-ui')
var test = require('tape')
var React = require('react')
var r = require('r-dom')
var shuffle = require('lodash.shuffle')
var clone = require('lodash.clone')
var random = require('rnd')
var Node = require('graph-view/node-ui')

// patch react for <image>
require('react-svg-patch')

// setup objects
var nodes = []
var relationshipType = 'relType-1'
var arr = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]
var entityIds = arr.map(function (i) { return 'entity-' + i })
var edgeObj = {}

var datum = {
  model: {
    image: 'http://i.imgur.com/AGprhft.jpg',
    name: 'Malkovich',
  },
  x: 50,
  y: 50
}

var node = r(Node, { node: datum })

test('create a node-ui element in the dom', function (t) {
  React.render(node, document.body, function () {
    // react-svg-patch works with real DOM, not here ?
    var el = document.getElementsByTagName('image')[0] || document.getElementsByTagName('img')[0]
    console.log('el', el.tagName)

    t.ok(el)
    t.equal(el.className, 'node circle-clip-20')
    t.equal(el.getAttribute('xlink:href'), datum.model.image)

    el.parentNode.removeChild(el)

    t.end()
  })

})



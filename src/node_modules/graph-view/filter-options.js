var debug = require('debug')('filter-options')

module.exports = function (queries) {

  debug('queries', queries)

  return queries.inactive.reduce(function (memo, query) {
    var inverseQueryActive

    if(query.component.inverse && queries.queryMap[query.component.inverse.id]) {
      if (query.target
        && queries.queryMap[query.component.inverse.id].sources
        && queries.queryMap[query.component.inverse.id].sources[query.target.id]) {
        inverseQueryActive = true
      }
      else if (query.source
        && queries.queryMap[query.component.inverse.id].targets
        && queries.queryMap[query.component.inverse.id].targets[query.source.id]) {
        inverseQueryActive = true
      }
    }

    if (!inverseQueryActive) {
      query.labels.forEach(function (label) { memo.push(label) })
    }

    return memo
  }, [])

}

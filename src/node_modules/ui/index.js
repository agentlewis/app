var React = require('react')
var r = require('r-dom')
var debug = require('debug')('ui:index')

var types = require('types')
var Layout = require('layout')

var FourOhFourPage = require('./404')

module.exports = React.createClass({
  render: function () {
    var route = this.props.route

    debug('render', this.props)

    var Page
    if (route) {
      Page = types.indexedByCollection[route.collection].Page
    } else {
      Page = FourOhFourPage
    }

    return (
      r(Layout, this.props,
        r(Page, this.props)
      )
    )
  }
})

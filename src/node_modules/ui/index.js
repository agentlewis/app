import { connect } from 'react-redux'
var React = require('react')
var r = require('r-dom')
var debug = require('debug')('ui')
var Graph = require('graph')
var extend = require('xtend')
var ThemeManager = require('material-ui/lib/styles/theme-manager')
var themeManager = new ThemeManager
var LightTheme = require('./light-theme')
themeManager.setTheme(LightTheme)


//getters
import { getters } from 'types'
import { relationshipGraph } from 'graph/reducers'
import { combineReducers } from 'redux'

const allProps = (state) => {
  return {
    getters: getters,
    reducers: {
      relationshipGraph: relationshipGraph
    }
  }
}



const Ui = React.createClass({

  childContextTypes: {
    muiTheme: React.PropTypes.object
  },

  getChildContext: function () {
    return {
      muiTheme: themeManager.getCurrentTheme()
    }
  },

  render: function () {
    debug('props, state', this.props, this.state)
    let state = this.props.store.getState()

    // debug('getters', getters())
    debug('reducers', relationshipGraph)

    return r(Graph, {
      agents: this.props.getters.agents(state),
      relationships: this.props.getters.relationships(state),
    })

  },

})



export default connect(allProps)(Ui)

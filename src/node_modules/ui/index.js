import { connect } from 'react-redux'
var React = require('react')
var r = require('r-dom')
var debug = require('debug')('ui')
var Graph = require('graph')
var extend = require('xtend')
// var ThemeManager = require('material-ui/lib/styles/theme-manager')
// var themeManager = new ThemeManager
// var LightTheme = require('./light-theme')
// themeManager.setTheme(LightTheme)


//getters
import getters from 'getters'
const allProps = (state) => {
  return {
    graph: state.graph,
    getters: getters
  }
}

const Ui = React.createClass({

  // childContextTypes: {
  //   muiTheme: React.PropTypes.object
  // },

  // getChildContext: function () {
  //   return {
  //     muiTheme: themeManager.getCurrentTheme()
  //   }
  // },

  render: function () {
    debug('props, state', this.props, this.state)
    let state = this.props.store.getState()
    debug('rg', this.props.store.getState().relationshipGraph)

    return React.createElement(Graph, {
      store: this.props.store,
      dispatch: this.props.dispatch,
      route: { context: 'holodex' },
      graph: this.props.store.getState().graph,
      agents: this.props.getters.agents(state),
      relationships: this.props.getters.relationships(state),
    })

  },

})



export default connect(allProps)(Ui)

var React = require('react');

var router = require('router');
var collections = require('collections');

var FourOhFourPage = require('./404');
var RawView = require('base/views/raw');

var isDev = process.env.NODE_ENV !== 'production';

module.exports = React.createClass({

  render: function () {
    var route = this.props.route;

    var Page;
    if (route) {
      Page = collections[route.collection].Page;
    } else {
      Page = FourOhFourPage;
    }

    return (
      <div>
        { isDev ? (
          <div className="debug">
            <header>
              {
                "collection: " + route.collection
                + ", id: " + route.id
                + ", relation: " + route.relation
                + ", query: " + JSON.stringify(route.query)
              }
            </header>
            <RawView model={this.props.model} />
          </div>
        ) : null }
        <a href="https://github.com/craftodex/app" className="source btn btn-default">View Source</a>
        <div>
          <Page
            route={this.props.route}
            model={this.props.model} />
        </div>
      </div>
    );
  },
});

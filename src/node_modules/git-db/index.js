var gitSync = require('git-sync')

var readData = require('read-data')

module.exports = getGraph

function getGraph (opts, cb) {
  gitSync({
    remoteUrl: opts.remoteUrl,
    localDir: opts.localDir,
    branch: opts.branch,
    cronTime: opts.cronTime
  }, function (err) {
    if (err) { return cb(err) }

    readData({
      dir: opts.localDir
    }, cb)
  })
}

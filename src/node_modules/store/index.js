import { applyMiddleware, createStore, compose } from 'redux'
import { holodex } from 'reducers'
import events from 'redux-effects-events'
import combineActions from 'redux-combine-actions'
import thunk from 'redux-thunk'
import logger from 'redux-logger'
import client from 'vdux-preset-client'
import component from 'virtex-component'
import dom from 'virtex-dom'
import multi from 'redux-multi'
import effects from 'redux-effects'
const debug = require('debug')('store')



const middleware = [
  component,
  dom(document),
  multi,
  effects,
  thunk,
  combineActions,
  events()
  //  logger
]

export const configureStore = (initialState) =>  {
  const finalCreateStore = compose(
    applyMiddleware(...middleware),
    window.devToolsExtension ? window.devToolsExtension() : f => f
  )(createStore)
    return applyMiddleware(...middleware)(createStore)(holodex, initialState)
   //return finalCreateStore(holodex, initialState)  
}
